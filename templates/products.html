<link rel="stylesheet" href="../static/product.css">


{% extends 'base.html' %}
{% block title%}
   Account Info
{% endblock %}
{% block nav %}
<div class="nav-flex">
    <a href="/">Home</a>
    <a href="/info">My Account</a>
    <a href="/products">Products</a>
    <a href="/chat">Chat</a>
    <a href="/orders">Orders</a>
    <a href="/login">Sign-out</a>
</div>
{% endblock %}
{% block body %}
<div class="section1">
    <h3>Products</h3>
    <form action="/products" method="post" id="search-form">
        <label for="search-products">Search products:</label>
        <input type="search" id="search-products" name="q" placeholder="Search products...">
        <button type="submit">Search</button>
        <a href="/products" class="btn btn-secondary">Reset Search</a>
    </form>
    
    
</div>
<div class="border">
<div class="container">
    {% for product in products %}
    <div class="product">
        <img src="{{ product['imageURL'] }}" alt="Product Image" class="product-image">
        <h2>{{ product['title'] }}</h2>
        <p>{{ product['price'] }}</p>
        <button onclick="showProductDetails({{ product._mapping }})">View Details</button>
    </div>
    {% endfor %}
</div>

    <div id="product-details-box" class="product-details-box">
        <button class="createTest-exit" onclick="hideProductDetails()">Close</button>
        <div id="product-details" class="product-details"></div>
    </div>

</div>

<select name="sort" id="sort">
    <option>Sort</option>
    <option value="byDate">By Date</option>
    <option value="byRating">By Rating (descending)</option>
</select><br>
{% for review in reviews %}
<div class="review">
    <img src="{{ review['img'] }}" alt="Product Image" class="image">
    <p><strong>  Rating:</strong> {{ review.rating }}</p>
    <p><strong>  Description:</strong> {{ review.description }}</p>
    <p><strong>  Date:</strong> {{ review.date }}</p>
</div>
{% endfor %}

<script>
    function showProductDetails(product) {
        var productDetailsBox = document.getElementById("product-details-box");
        var productDetails = document.getElementById("product-details");

        productDetails.innerHTML = '';

        var productImage = document.createElement("img");
        productImage.src = product.imageURL;
        productImage.className = "product-image";
        productDetails.appendChild(productImage);

        var productName = document.createElement("div");
        productName.innerHTML = "<strong>Product Name:</strong> " + product.title;
        productDetails.appendChild(productName);

        var productPrice = document.createElement("div");
        productPrice.innerHTML = "<strong>Price:</strong> " + product.price;
        productDetails.appendChild(productPrice);

        var productDescription = document.createElement("div");
        productDescription.innerHTML = "<strong>Description:</strong> " + product.description;
        productDetails.appendChild(productDescription);
        
        var addToCartBtn = document.createElement("button");
        addToCartBtn.className = "add-to-cart-btn";
        addToCartBtn.innerHTML = "Add to Cart";
        productDetails.appendChild(addToCartBtn);

        addToCartBtn.addEventListener('click', function() {   // literally an empty function cuz i havent made cart yet
            // Add cart functionality here
            console.log("Product added to cart: " + product.productID);
        });

        // Show product details box
        productDetailsBox.style.display = "block";
    }

    function hideProductDetails() {
        var productDetailsBox = document.getElementById("product-details-box");
        productDetailsBox.style.display = "none";
    }
</script>   


{% endblock %}
